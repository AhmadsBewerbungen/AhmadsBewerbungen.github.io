<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Retro Roblox Noob</title>
<style>
  body {
    margin: 0;
    background: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  canvas {
    image-rendering: pixelated;
    border: 4px solid #000;
    background: #87ceeb;
  }
</style>
</head>
<body>

<canvas id="game" width="320" height="180"></canvas>

<script>
/* =====================
   BASIC SETUP
   ===================== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const SCALE = 3;
canvas.style.width = canvas.width * SCALE + "px";
canvas.style.height = canvas.height * SCALE + "px";

const GRAVITY = 0.25;
const GROUND_Y = 140;

const keys = {};
addEventListener("keydown", e => keys[e.key] = true);
addEventListener("keyup", e => keys[e.key] = false);

/* =====================
   CAMERA
   ===================== */
const camera = { x: 0 };

/* =====================
   PLAYER
   ===================== */
const player = {
  x: 40,
  y: GROUND_Y,
  vx: 0,
  vy: 0,
  w: 24,
  h: 26,
  facing: 1,
  state: "idle",
  frame: 0,
  frameTimer: 0
};

const animations = {
  idle: { frames: 4, fps: 12 },
  run:  { frames: 6, fps: 16 },
  jump: { frames: 1, fps: 1 }
};

/* =====================
   LEVEL DATA
   ===================== */
const platforms = [
  { x: 0,   y: GROUND_Y, w: 800, h: 40 },
  { x: 120, y: 110, w: 40, h: 8 },
  { x: 200, y: 90,  w: 40, h: 8 },
  { x: 280, y: 70,  w: 40, h: 8 }
];

const coins = [
  { x: 130, y: 90, taken: false },
  { x: 210, y: 70, taken: false },
  { x: 290, y: 50, taken: false }
];

const clouds = [
  { x: 40, y: 25 },
  { x: 160, y: 35 },
  { x: 260, y: 20 }
];

let score = 0;

/* =====================
   DRAW NOOB (RETRO)
   ===================== */
function drawNoob(frame) {
  const px = Math.floor(player.x - camera.x);
  const py = Math.floor(player.y - player.h);

  ctx.save();
  ctx.translate(px + player.w / 2, 0);
  ctx.scale(player.facing, 1);
  ctx.translate(-px - player.w / 2, 0);

  const bob = player.state === "idle"
    ? Math.sin(frame * 0.6) * 1
    : 0;

  // Head
  ctx.fillStyle = "#ffd800";
  ctx.fillRect(px + 3, py - 4 + bob, 18, 18);

  ctx.fillStyle = "#e6c200";
  ctx.fillRect(px + 12, py + 6 + bob, 9, 8);

  ctx.fillStyle = "#ffef66";
  ctx.fillRect(px + 4, py - 3 + bob, 6, 4);

  ctx.strokeStyle = "#000";
  ctx.strokeRect(px + 3, py - 4 + bob, 18, 18);

  // Face
  ctx.fillStyle = "#000";
  ctx.fillRect(px + 8,  py + 3 + bob, 2, 2);
  ctx.fillRect(px + 14, py + 3 + bob, 2, 2);
  ctx.fillRect(px + 9,  py + 8 + bob, 6, 1);
  ctx.fillRect(px + 8,  py + 7 + bob, 1, 1);
  ctx.fillRect(px + 15, py + 7 + bob, 1, 1);

  // Body
  ctx.fillStyle = "#1e90ff";
  ctx.fillRect(px + 9, py + 14, 6, 6);
  ctx.strokeRect(px + 9, py + 14, 6, 6);

  // Arms
  const swing = player.state === "run" ? Math.sin(frame) * 2 : 0;
  ctx.fillStyle = "#ffd800";
  ctx.fillRect(px + 5,  py + 14 + swing, 3, 6);
  ctx.fillRect(px + 16, py + 14 - swing, 3, 6);

  // Legs
  ctx.fillStyle = "#000";
  ctx.fillRect(px + 9,  py + 20 + swing, 2, 4);
  ctx.fillRect(px + 13, py + 20 - swing, 2, 4);

  ctx.restore();
}

/* =====================
   DRAW WORLD
   ===================== */
function drawPlatform(p) {
  ctx.fillStyle = "#228b22";
  ctx.fillRect(p.x - camera.x, p.y, p.w, p.h);
  ctx.fillStyle = "#1b6b1b";
  ctx.fillRect(p.x - camera.x, p.y, p.w, 4);
}

function drawCoin(c) {
  ctx.fillStyle = "#ffd800";
  ctx.fillRect(c.x - camera.x, c.y, 6, 6);
  ctx.strokeStyle = "#000";
  ctx.strokeRect(c.x - camera.x, c.y, 6, 6);
}

function drawCloud(c) {
  ctx.fillStyle = "#fff";
  ctx.fillRect(c.x - camera.x * 0.3, c.y, 16, 6);
  ctx.fillRect(c.x - camera.x * 0.3 + 4, c.y - 4, 12, 6);
}

/* =====================
   UPDATE
   ===================== */
function update(dt) {
  player.vx = 0;
  if (keys["ArrowLeft"] || keys["a"]) {
    player.vx = -1.5;
    player.facing = -1;
  }
  if (keys["ArrowRight"] || keys["d"]) {
    player.vx = 1.5;
    player.facing = 1;
  }
  if ((keys[" "] || keys["ArrowUp"]) && player.vy === 0) {
    player.vy = -5;
  }

  player.vy += GRAVITY;
  player.x += player.vx;
  player.y += player.vy;

  // Collisions
  platforms.forEach(p => {
    if (
      player.x + player.w > p.x &&
      player.x < p.x + p.w &&
      player.y <= p.y &&
      player.y + player.vy >= p.y
    ) {
      player.y = p.y;
      player.vy = 0;
    }
  });

  // State
  player.state =
    player.vy !== 0 ? "jump" :
    player.vx !== 0 ? "run" : "idle";

  // Animation
  const anim = animations[player.state];
  player.frameTimer += dt;
  if (player.frameTimer > 1000 / anim.fps) {
    player.frame = (player.frame + 1) % anim.frames;
    player.frameTimer = 0;
  }

  // Coins
  coins.forEach(c => {
    if (!c.taken &&
        player.x < c.x + 6 &&
        player.x + player.w > c.x &&
        player.y - player.h < c.y + 6 &&
        player.y > c.y) {
      c.taken = true;
      score++;
    }
  });

  // Camera follow
  camera.x = player.x - 80;

  // Clouds
  clouds.forEach(c => {
    c.x -= 0.2;
    if (c.x < -50) c.x += 400;
  });
}

/* =====================
   DRAW
   ===================== */
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  clouds.forEach(drawCloud);
  platforms.forEach(drawPlatform);
  coins.filter(c => !c.taken).forEach(drawCoin);
  drawNoob(player.frame);

  ctx.fillStyle = "#000";
  ctx.fillText("STUDS: " + score, 8, 12);
}

/* =====================
   LOOP
   ===================== */
let last = 0;
function loop(t) {
  const dt = t - last;
  last = t;
  update(dt);
  draw();
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);
</script>

</body>
</html>
